{% extends 'admin/base.html' %}

{% set page_names = {'home': 'Accueil', 'services': 'Services', 'cleaning': 'Nettoyage Chantier', 'domiciliation': 'Domiciliation', 'consulting': 'Conseils', 'about': 'À Propos', 'contact': 'Contact', 'testimonials': 'Témoignages'} %}

{% block title %}SEO - {{ page_names.get(page_type, page_type) }}{% endblock %}
{% block page_title %}SEO - {{ page_names.get(page_type, page_type) }}{% endblock %}

{% block content %}
<div class="max-w-3xl">
    <form method="POST" enctype="multipart/form-data" class="space-y-6">
        <div class="bg-white rounded-xl shadow-sm p-6">
            <h2 class="text-lg font-bold text-secondary-900 mb-6">Balises Meta</h2>
            
            <div>
                <label for="meta_title" class="block text-sm font-medium text-gray-700 mb-2">Meta Title (max 70 caractères)</label>
                <input type="text" id="meta_title" name="meta_title" maxlength="70" value="{{ seo.meta_title if seo else '' }}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                <p class="text-xs text-gray-500 mt-1">Titre qui apparaît dans les résultats de recherche</p>
            </div>
            
            <div class="mt-6">
                <label for="meta_description" class="block text-sm font-medium text-gray-700 mb-2">Meta Description (max 160 caractères)</label>
                <textarea id="meta_description" name="meta_description" maxlength="160" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">{{ seo.meta_description if seo else '' }}</textarea>
                <p class="text-xs text-gray-500 mt-1">Description qui apparaît dans les résultats de recherche</p>
            </div>
            
            <div class="mt-6">
                <label for="keywords" class="block text-sm font-medium text-gray-700 mb-2">Mots-clés</label>
                <input type="text" id="keywords" name="keywords" value="{{ seo.keywords if seo else '' }}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                <p class="text-xs text-gray-500 mt-1">Séparez les mots-clés par des virgules</p>
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-sm p-6">
            <h2 class="text-lg font-bold text-secondary-900 mb-6">Open Graph (réseaux sociaux)</h2>
            
            <div>
                <label for="og_title" class="block text-sm font-medium text-gray-700 mb-2">OG Title</label>
                <input type="text" id="og_title" name="og_title" value="{{ seo.og_title if seo else '' }}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
            </div>
            
            <div class="mt-6">
                <label for="og_description" class="block text-sm font-medium text-gray-700 mb-2">OG Description</label>
                <textarea id="og_description" name="og_description" rows="2" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">{{ seo.og_description if seo else '' }}</textarea>
            </div>
            
            <div class="mt-6">
                <label for="og_image" class="block text-sm font-medium text-gray-700 mb-2">OG Image</label>
                {% if seo and seo.og_image %}
                <div class="mb-2">
                    <img src="{{ seo.og_image }}" alt="OG Image" class="w-32 h-20 object-cover rounded">
                </div>
                {% endif %}
                <input type="file" id="og_image" name="og_image" accept="image/*" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-sm p-6">
            <h2 class="text-lg font-bold text-secondary-900 mb-6">Avancé</h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label for="canonical_url" class="block text-sm font-medium text-gray-700 mb-2">URL Canonique</label>
                    <input type="url" id="canonical_url" name="canonical_url" value="{{ seo.canonical_url if seo else '' }}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                </div>
                <div>
                    <label for="robots" class="block text-sm font-medium text-gray-700 mb-2">Robots</label>
                    <select id="robots" name="robots" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                        <option value="index, follow" {% if not seo or seo.robots == 'index, follow' %}selected{% endif %}>index, follow</option>
                        <option value="noindex, follow" {% if seo and seo.robots == 'noindex, follow' %}selected{% endif %}>noindex, follow</option>
                        <option value="index, nofollow" {% if seo and seo.robots == 'index, nofollow' %}selected{% endif %}>index, nofollow</option>
                        <option value="noindex, nofollow" {% if seo and seo.robots == 'noindex, nofollow' %}selected{% endif %}>noindex, nofollow</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="flex justify-between">
            <a href="{{ url_for('admin.seo_list') }}" class="px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                Annuler
            </a>
            <button type="submit" class="bg-primary-600 text-white px-8 py-3 rounded-lg hover:bg-primary-700 transition">
                Enregistrer
            </button>
        </div>
    </form>
</div>
{% endblock %}
